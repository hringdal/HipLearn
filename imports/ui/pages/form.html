<template name="Form">
    <div class="ui container">
        <div class="ui segment">
            {{#autoForm collection=getCollection type="update" doc=getBook id="insertBook"}}
                {{> afQuickField name='name'}}
                {{> afQuickField name='course_id' search=true placeholder='Select a course'}}
                <h4 class="ui header">Chapters</h4>
                {{> afArrayField name='chapters' template="bookForm"}}
                <button type="submit" class="ui positive button">Update</button>
            {{/autoForm}}
        </div>
    </div>
</template>

<!--Nødvendig for å fjerne litt stygg standard stil-->

<template name="afArrayField_bookForm">
    <!--<h4 class="ui header">
        {{afFieldLabelText name=this.atts.name}}
    </h4>-->
    <div class="ui basic segment">
        {{#if afFieldIsInvalid name=this.atts.name}}
            <div class="ui pointing red basic label">
                {{{afFieldMessage name=this.atts.name}}}
            </div>
        {{/if}}
        {{#afEachArrayItem name=this.atts.name minCount=this.atts.minCount maxCount=this.atts.maxCount}}
            <div class="field autoform-array-item">
                {{#if afArrayFieldHasMoreThanMinimum name=../atts.name minCount=../atts.minCount
                      maxCount=../atts.maxCount}}
                    <div class="ui mini red corner label autoform-remove-item">
                        <i class="icon minus"></i>
                    </div>
                {{/if}}
                {{> afObjectField name=this.name label=false options=afOptionsFromSchema}}
            </div>
        {{/afEachArrayItem}}
        {{#if afArrayFieldHasLessThanMaximum name=this.atts.name minCount=this.atts.minCount
              maxCount=this.atts.maxCount}}
            <div class="field">
                <div class="ui small green icon button autoform-add-item" data-autoform-field="{{this.atts.name}}"
                     data-autoform-minCount="{{this.atts.minCount}}" data-autoform-maxCount="{{this.atts.maxCount}}">
                    <i class="icon plus"></i>
                </div>
            </div>
        {{/if}}
    </div>
</template>
